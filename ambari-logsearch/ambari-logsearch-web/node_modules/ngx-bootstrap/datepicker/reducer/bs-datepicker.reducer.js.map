{"version":3,"sources":["../../../.tmp/datepicker/reducer/bs-datepicker.reducer.ts"],"names":[],"mappings":"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","file":"bs-datepicker.reducer.js","sourceRoot":"","sourcesContent":["import {\n  BsDatepickerState, initialDatepickerState\n} from './bs-datepicker.state';\nimport { Action } from '../../mini-ngrx/index';\nimport { BsDatepickerActions } from './bs-datepicker.actions';\nimport { calcDaysCalendar } from '../engine/calc-days-calendar';\nimport { formatDaysCalendar } from '../engine/format-days-calendar';\nimport { flagDaysCalendar } from '../engine/flag-days-calendar';\nimport { shiftDate, setDate } from '../../bs-moment/utils/date-setters';\nimport { canSwitchMode } from '../engine/view-mode';\nimport { formatMonthsCalendar } from '../engine/format-months-calendar';\nimport { flagMonthsCalendar } from '../engine/flag-months-calendar';\nimport {\n  formatYearsCalendar, yearsPerCalendar\n} from '../engine/format-years-calendar';\nimport { flagYearsCalendar } from '../engine/flag-years-calendar';\nimport { BsViewNavigationEvent, DatepickerFormatOptions } from '../models/index';\nimport { isArray } from '../../bs-moment/utils/type-checks';\nimport { startOf } from '../../bs-moment/utils/start-end-of';\n\nexport function bsDatepickerReducer(state = initialDatepickerState, action: Action): BsDatepickerState {\n  switch (action.type) {\n    case(BsDatepickerActions.CALCULATE): {\n      return calculateReducer(state);\n    }\n\n    case(BsDatepickerActions.FORMAT): {\n      return formatReducer(state, action);\n    }\n\n    case(BsDatepickerActions.FLAG): {\n      return flagReducer(state, action);\n    }\n\n    case(BsDatepickerActions.NAVIGATE_OFFSET): {\n      const date = shiftDate(startOf(state.view.date, 'month'), action.payload);\n      const newState = {\n        view: {\n          mode: state.view.mode,\n          date\n        }\n      };\n\n      return Object.assign({}, state, newState);\n    }\n\n    case(BsDatepickerActions.NAVIGATE_TO): {\n      const payload: BsViewNavigationEvent = action.payload;\n\n      const date = setDate(state.view.date, payload.unit);\n      const mode = payload.viewMode;\n      const newState = {view: {date, mode}};\n\n      return Object.assign({}, state, newState);\n    }\n\n    case(BsDatepickerActions.CHANGE_VIEWMODE): {\n      if (!canSwitchMode(action.payload)) {\n        return state;\n      }\n      const date = state.view.date;\n      const mode = action.payload;\n      const newState = {view: {date, mode}};\n\n      return Object.assign({}, state, newState);\n    }\n\n    case(BsDatepickerActions.HOVER): {\n      return Object.assign({}, state, {hoveredDate: action.payload});\n    }\n\n    case(BsDatepickerActions.SELECT): {\n      const newState = {\n        selectedDate: action.payload,\n        view: state.view\n      };\n\n      if (action.payload) {\n        newState.view = {\n          date: action.payload,\n          mode: state.view.mode\n        };\n      }\n\n      return Object.assign({}, state, newState);\n    }\n\n    case(BsDatepickerActions.SET_OPTIONS): {\n      const newState = action.payload;\n      // looks not really good\n      if (newState.value) {\n        newState.view = state.view;\n        if (isArray(newState.value)) {\n          newState.view = {\n            mode: state.view.mode,\n            date: newState.value[0]\n          };\n          newState.selectedRange = newState.value;\n        } else {\n          newState.view = {\n            mode: state.view.mode,\n            date: newState.value\n          };\n          newState.selectedDate = newState.value;\n        }\n      }\n\n      return Object.assign({}, state, newState);\n    }\n\n    // date range picker\n    case(BsDatepickerActions.SELECT_RANGE): {\n      return Object.assign({}, state, {selectedRange: action.payload});\n    }\n\n    case(BsDatepickerActions.SET_MIN_DATE): {\n      return Object.assign({}, state, {\n        minDate: action.payload\n      });\n    }\n    case(BsDatepickerActions.SET_MAX_DATE): {\n      return Object.assign({}, state, {\n        maxDate: action.payload\n      });\n    }\n    case(BsDatepickerActions.SET_IS_DISABLED): {\n      return Object.assign({}, state, {\n        isDisabled: action.payload\n      });\n    }\n\n    default:\n      return state;\n  }\n}\n\nfunction calculateReducer(state: BsDatepickerState): BsDatepickerState {\n  // how many calendars\n  const displayMonths = state.displayMonths;\n  // use selected date on initial rendering if set\n  let viewDate = state.view.date;\n\n  if (state.view.mode === 'day') {\n    const monthsModel = new Array(displayMonths);\n    for (let monthIndex = 0; monthIndex < displayMonths; monthIndex++) {\n      // todo: for unlinked calendars it will be harder\n      monthsModel[monthIndex] = calcDaysCalendar(viewDate, state.monthViewOptions);\n      viewDate = shiftDate(viewDate, {month: 1});\n    }\n\n    return Object.assign({}, state, {monthsModel});\n  }\n\n  if (state.view.mode === 'month') {\n    const monthsCalendar = new Array(displayMonths);\n    for (let calendarIndex = 0; calendarIndex < displayMonths; calendarIndex++) {\n      // todo: for unlinked calendars it will be harder\n      monthsCalendar[calendarIndex] = formatMonthsCalendar(viewDate, getFormatOptions(state));\n      viewDate = shiftDate(viewDate, {year: 1});\n    }\n\n    return Object.assign({}, state, {monthsCalendar});\n  }\n\n  if (state.view.mode === 'year') {\n    const yearsCalendarModel = new Array(displayMonths);\n\n    for (let calendarIndex = 0; calendarIndex < displayMonths; calendarIndex++) {\n      // todo: for unlinked calendars it will be harder\n      yearsCalendarModel[calendarIndex] = formatYearsCalendar(viewDate, getFormatOptions(state));\n      viewDate = shiftDate(viewDate, {year: yearsPerCalendar});\n    }\n\n    return Object.assign({}, state, {yearsCalendarModel});\n  }\n\n  return state;\n}\n\nfunction formatReducer(state: BsDatepickerState, action: Action): BsDatepickerState {\n  if (state.view.mode === 'day') {\n    const formattedMonths = state.monthsModel\n      .map((month, monthIndex) => formatDaysCalendar(month, getFormatOptions(state), monthIndex));\n\n    return Object.assign({}, state, {formattedMonths});\n  }\n\n  // how many calendars\n  const displayMonths = state.displayMonths;\n  // check initial rendering\n  // use selected date on initial rendering if set\n  let viewDate = state.view.date;\n\n  if (state.view.mode === 'month') {\n    const monthsCalendar = new Array(displayMonths);\n    for (let calendarIndex = 0; calendarIndex < displayMonths; calendarIndex++) {\n      // todo: for unlinked calendars it will be harder\n      monthsCalendar[calendarIndex] = formatMonthsCalendar(viewDate, getFormatOptions(state));\n      viewDate = shiftDate(viewDate, {year: 1});\n    }\n\n    return Object.assign({}, state, {monthsCalendar});\n  }\n\n  if (state.view.mode === 'year') {\n    const yearsCalendarModel = new Array(displayMonths);\n    for (let calendarIndex = 0; calendarIndex < displayMonths; calendarIndex++) {\n      // todo: for unlinked calendars it will be harder\n      yearsCalendarModel[calendarIndex] = formatYearsCalendar(viewDate, getFormatOptions(state));\n      viewDate = shiftDate(viewDate, {year: 16});\n    }\n\n    return Object.assign({}, state, {yearsCalendarModel});\n  }\n\n  return state;\n}\n\nfunction flagReducer(state: BsDatepickerState, action: Action): BsDatepickerState {\n  if (state.view.mode === 'day') {\n    const flaggedMonths = state.formattedMonths\n      .map((formattedMonth, monthIndex) => flagDaysCalendar(formattedMonth, {\n        isDisabled: state.isDisabled,\n        minDate: state.minDate,\n        maxDate: state.maxDate,\n        hoveredDate: state.hoveredDate,\n        selectedDate: state.selectedDate,\n        selectedRange: state.selectedRange,\n        displayMonths: state.displayMonths,\n        monthIndex\n      }));\n\n    return Object.assign({}, state, {flaggedMonths});\n  }\n\n  if (state.view.mode === 'month') {\n    const flaggedMonthsCalendar = state.monthsCalendar\n      .map((formattedMonth, monthIndex) => flagMonthsCalendar(formattedMonth, {\n        isDisabled: state.isDisabled,\n        minDate: state.minDate,\n        maxDate: state.maxDate,\n        hoveredMonth: state.hoveredMonth,\n        displayMonths: state.displayMonths,\n        monthIndex\n      }));\n\n    return Object.assign({}, state, {flaggedMonthsCalendar});\n  }\n\n  if (state.view.mode === 'year') {\n    const yearsCalendarFlagged = state.yearsCalendarModel\n      .map((formattedMonth, yearIndex) => flagYearsCalendar(formattedMonth, {\n        isDisabled: state.isDisabled,\n        minDate: state.minDate,\n        maxDate: state.maxDate,\n        hoveredYear: state.hoveredYear,\n        displayMonths: state.displayMonths,\n        yearIndex\n      }));\n\n    return Object.assign({}, state, {yearsCalendarFlagged});\n  }\n\n  return state;\n}\n\nfunction getFormatOptions(state: BsDatepickerState): DatepickerFormatOptions {\n  return {\n    locale: state.locale,\n\n    monthTitle: state.monthTitle,\n    yearTitle: state.yearTitle,\n\n    dayLabel: state.dayLabel,\n    monthLabel: state.monthLabel,\n    yearLabel: state.yearLabel,\n\n    weekNumbers: state.weekNumbers\n  };\n}\n"]}