{"version":3,"file":"bin.js","sourceRoot":"","sources":["../src/bin.ts"],"names":[],"mappings":";;AAEA,+CAAqC;AACrC,6BAA2B;AAC3B,iCAAmC;AAEnC,IAAM,IAAI,GAAG,OAAO,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAA;AAElC,OAAO,CAAC,UAAU,GAAG,EAAE,OAAO;IAC5B,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;QACR,OAAO,CAAC,KAAK,CAAC,GAAG,CAAC,KAAK,CAAC,CAAA;QACxB,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,CAAA;QACf,MAAM,CAAA;IACR,CAAC;IAED,IAAM,QAAQ,GAAa,EAAE,CAAA;IAC7B,IAAM,UAAU,GAAa,EAAE,CAAA;IAE/B,IAAM,UAAU,GAAG,OAAO,CAAC,MAAM,CAAC;QAChC,OAAO;QACP,SAAS;QACT,aAAa;QACb,WAAW;QACX,UAAU;QACV,kBAAkB;QAClB,oBAAoB;QACpB,qBAAqB;QACrB,qBAAqB;QACrB,wBAAwB;QACxB,mBAAmB;QACnB,qBAAqB;KACtB,CAAC,CAAA;IAEF,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE,CAAC;QACrC,IAAM,GAAG,GAAG,IAAI,CAAC,CAAC,CAAC,CAAA;QACnB,IAAM,IAAI,GAAG,GAAG,CAAC,KAAK,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAA;QAEjC,EAAE,CAAC,CAAC,IAAI,KAAK,IAAI,CAAC,CAAC,CAAC;YAClB,QAAQ,CAAC,IAAI,CAAC,SAAS,CAAC,CAAA;QAC1B,CAAC;QAAC,IAAI,CAAC,EAAE,CAAC,CAAC,IAAI,KAAK,KAAK,CAAC,CAAC,CAAC;YAC1B,QAAQ,CAAC,IAAI,CAAC,aAAa,CAAC,CAAA;QAC9B,CAAC;QAAC,IAAI,CAAC,EAAE,CAAC,CAAC,UAAU,CAAC,OAAO,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;YACzC,QAAQ,CAAC,IAAI,CAAC,GAAG,CAAC,CAAA;QACpB,CAAC;QAAC,IAAI,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;YAC3B,UAAU,CAAC,IAAI,CAAC,GAAG,CAAC,CAAA;QACtB,CAAC;QAAC,IAAI,CAAC,CAAC;YAEN,UAAU,CAAC,IAAI,OAAf,UAAU,EAAS,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,EAAC;YACjC,KAAK,CAAA;QACP,CAAC;IACH,CAAC;IAED,IAAM,IAAI,GAAG,qBAAK,CAChB,OAAO,CAAC,QAAQ,EAChB,QAAQ,CAAC,MAAM,CAAC,WAAI,CAAC,SAAS,EAAE,SAAS,CAAC,EAAE,UAAU,CAAC,EACvD,EAAE,KAAK,EAAE,SAAS,EAAE,CACrB,CAAA;IAED,IAAI,CAAC,EAAE,CAAC,MAAM,EAAE,UAAU,IAAY,EAAE,MAAc;QACpD,OAAO,CAAC,EAAE,CAAC,MAAM,EAAE;YACjB,EAAE,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC;gBACX,OAAO,CAAC,IAAI,CAAC,OAAO,CAAC,GAAG,EAAE,MAAM,CAAC,CAAA;YACnC,CAAC;YAAC,IAAI,CAAC,CAAC;gBACN,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,CAAA;YACpB,CAAC;QACH,CAAC,CAAC,CAAA;IACJ,CAAC,CAAC,CAAA;AACJ,CAAC,CAAC,CAAA","sourcesContent":["#!/usr/bin/env node\n\nimport { spawn } from 'child_process'\nimport { join } from 'path'\nimport v8flags = require('v8flags')\n\nconst argv = process.argv.slice(2)\n\nv8flags(function (err, v8flags) {\n  if (err) {\n    console.error(err.stack)\n    process.exit(1)\n    return\n  }\n\n  const nodeArgs: string[] = []\n  const scriptArgs: string[] = []\n\n  const knownFlags = v8flags.concat([\n    'debug',\n    '--debug',\n    '--debug-brk',\n    '--inspect',\n    '--nolazy',\n    '--no-deprecation',\n    '--log-timer-events',\n    '--throw-deprecation',\n    '--trace-deprecation',\n    '--allow-natives-syntax',\n    '--perf-basic-prof',\n    '--preserve-symlinks'\n  ])\n\n  for (let i = 0; i < argv.length; i++) {\n    const arg = argv[i]\n    const flag = arg.split('=', 1)[0]\n\n    if (flag === '-d') {\n      nodeArgs.push('--debug')\n    } else if (flag === '-gc') {\n      nodeArgs.push('--expose-gc')\n    } else if (knownFlags.indexOf(flag) > -1) {\n      nodeArgs.push(arg)\n    } else if (/^-/.test(flag)) {\n      scriptArgs.push(arg)\n    } else {\n      // Break when we encounter a \"script\".\n      scriptArgs.push(...argv.slice(i))\n      break\n    }\n  }\n\n  const proc = spawn(\n    process.execPath,\n    nodeArgs.concat(join(__dirname, '_bin.js'), scriptArgs),\n    { stdio: 'inherit' }\n  )\n\n  proc.on('exit', function (code: number, signal: string) {\n    process.on('exit', function () {\n      if (signal) {\n        process.kill(process.pid, signal)\n      } else {\n        process.exit(code)\n      }\n    })\n  })\n})\n"]}