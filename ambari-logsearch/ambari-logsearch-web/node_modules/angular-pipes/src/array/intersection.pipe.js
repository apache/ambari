"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = require("@angular/core");
var utils_1 = require("../utils/utils");
var IntersectionPipe = (function () {
    function IntersectionPipe() {
    }
    IntersectionPipe.prototype.transform = function (a, b) {
        if ((!utils_1.isArray(a) && !utils_1.isDeepObject(a)) || !utils_1.isArray(b)) {
            return [];
        }
        if (utils_1.isDeepObject(a)) {
            var unwrapped = utils_1.unwrapDeep(a);
            if (!utils_1.isArray(unwrapped)) {
                return [];
            }
            return unwrapped.reduce(function (intersection, value) { return intersection.concat((utils_1.deepIndexOf(b, value) !== -1 && utils_1.deepIndexOf(intersection, value) === -1) ? value : []); }, []);
        }
        return a.reduce(function (intersection, value) { return intersection.concat((b.indexOf(value) !== -1 && intersection.indexOf(value) === -1) ? value : []); }, []);
    };
    return IntersectionPipe;
}());
IntersectionPipe.decorators = [
    { type: core_1.Pipe, args: [{
                name: 'intersection'
            },] },
];
/** @nocollapse */
IntersectionPipe.ctorParameters = function () { return []; };
exports.IntersectionPipe = IntersectionPipe;
//# sourceMappingURL=intersection.pipe.js.map