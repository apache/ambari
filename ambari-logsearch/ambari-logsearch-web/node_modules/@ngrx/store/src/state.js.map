{"version":3,"file":"state.js","sourceRoot":"","sources":["../../src/state.ts"],"names":[],"mappings":";;;;;;;;;;AAAA,OAAO,EAAE,cAAc,EAAE,MAAM,8BAA8B,CAAC;AAC9D,OAAO,EAAE,IAAI,EAAE,MAAM,oBAAoB,CAAC;AAC1C,OAAO,EAAE,SAAS,EAAE,MAAM,yBAAyB,CAAC;AACpD,OAAO,EAAE,KAAK,EAAE,MAAM,sBAAsB,CAAC;AAC7C,OAAO,EAAE,eAAe,EAAE,MAAM,sBAAsB,CAAC;AAKvD;IAA8B,yBAAkB;IAC9C,eAAY,aAAgB,EAAE,OAAmB,EAAE,QAAiB;QAApE,YACE,kBAAM,aAAa,CAAC,SASrB;QAPC,IAAM,cAAc,GAAG,SAAS,CAAC,IAAI,CAAC,OAAO,EAAE,KAAK,CAAC,CAAC;QACtD,IAAM,iBAAiB,GAAG,cAAc,CAAC,IAAI,CAAC,cAAc,EAAE,QAAQ,CAAC,CAAC;QACxE,IAAM,MAAM,GAAG,IAAI,CAAC,IAAI,CAAC,iBAAiB,EAAE,UAAC,KAAK,EAAE,EAAmB;gBAAjB,cAAM,EAAE,eAAO;YACnE,MAAM,CAAC,OAAO,CAAC,KAAK,EAAE,MAAM,CAAC,CAAC;QAChC,CAAC,EAAE,aAAa,CAAC,CAAC;QAElB,MAAM,CAAC,SAAS,CAAC,UAAA,KAAK,IAAI,OAAA,KAAI,CAAC,IAAI,CAAC,KAAK,CAAC,EAAhB,CAAgB,CAAC,CAAC;;IAC9C,CAAC;IACH,YAAC;AAAD,CAAC,AAZD,CAA8B,eAAe,GAY5C","sourcesContent":["import { withLatestFrom } from 'rxjs/operator/withLatestFrom';\nimport { scan } from 'rxjs/operator/scan';\nimport { observeOn } from 'rxjs/operator/observeOn';\nimport { queue } from 'rxjs/scheduler/queue';\nimport { BehaviorSubject } from 'rxjs/BehaviorSubject';\n\nimport { Dispatcher } from './dispatcher';\nimport { Reducer } from './reducer';\n\nexport class State<T> extends BehaviorSubject<T> {\n  constructor(_initialState: T, action$: Dispatcher, reducer$: Reducer) {\n    super(_initialState);\n\n    const actionInQueue$ = observeOn.call(action$, queue);\n    const actionAndReducer$ = withLatestFrom.call(actionInQueue$, reducer$);\n    const state$ = scan.call(actionAndReducer$, (state, [ action, reducer ]) => {\n      return reducer(state, action);\n    }, _initialState);\n\n    state$.subscribe(value => this.next(value));\n  }\n}\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n"]}