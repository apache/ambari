!function(global,factory){"object"==typeof exports&&"undefined"!=typeof module?factory(exports,require("rxjs/BehaviorSubject"),require("@angular/core"),require("@ngrx/core"),require("rxjs/Observable"),require("rxjs/operator/withLatestFrom"),require("rxjs/operator/scan"),require("rxjs/operator/observeOn"),require("rxjs/scheduler/queue")):"function"==typeof define&&define.amd?define(["exports","rxjs/BehaviorSubject","@angular/core","@ngrx/core","rxjs/Observable","rxjs/operator/withLatestFrom","rxjs/operator/scan","rxjs/operator/observeOn","rxjs/scheduler/queue"],factory):factory((global.ngrx=global.ngrx||{},global.ngrx.store=global.ngrx.store||{}),global.Rx,global.ng.core,global.ngrx.core,global.Rx,global.Rx.Observable,global.Rx.Observable.prototype,global.Rx.Observable.prototype,global.Rx.Scheduler)}(this,function(exports,rxjs_BehaviorSubject,_angular_core,_ngrx_core,rxjs_Observable,rxjs_operator_withLatestFrom,rxjs_operator_scan,rxjs_operator_observeOn,rxjs_scheduler_queue){"use strict";function combineReducers(reducers){for(var reducerKeys=Object.keys(reducers),finalReducers={},i=0;i<reducerKeys.length;i++){var key=reducerKeys[i];"function"==typeof reducers[key]&&(finalReducers[key]=reducers[key])}var finalReducerKeys=Object.keys(finalReducers);return function(state,action){void 0===state&&(state={});for(var hasChanged=!1,nextState={},i=0;i<finalReducerKeys.length;i++){var key=finalReducerKeys[i],reducer=finalReducers[key],previousStateForKey=state[key],nextStateForKey=reducer(previousStateForKey,action);nextState[key]=nextStateForKey,hasChanged=hasChanged||nextStateForKey!==previousStateForKey}return hasChanged?nextState:state}}function _initialReducerFactory(reducer){return"function"==typeof reducer?reducer:combineReducers(reducer)}function _initialStateFactory(initialState,reducer){return initialState?initialState:reducer(void 0,{type:Dispatcher.INIT})}function _storeFactory(dispatcher,reducer,state$){return new Store(dispatcher,reducer,state$)}function _stateFactory(initialState,dispatcher,reducer){return new State(initialState,dispatcher,reducer)}function _reducerFactory(dispatcher,reducer){return new Reducer(dispatcher,reducer)}function provideStore(_reducer,_initialState){return[Dispatcher,{provide:Store,useFactory:_storeFactory,deps:[Dispatcher,Reducer,State]},{provide:Reducer,useFactory:_reducerFactory,deps:[Dispatcher,INITIAL_REDUCER]},{provide:State,useFactory:_stateFactory,deps:[INITIAL_STATE,Dispatcher,Reducer]},{provide:INITIAL_REDUCER,useFactory:_initialReducerFactory,deps:[_INITIAL_REDUCER]},{provide:INITIAL_STATE,useFactory:_initialStateFactory,deps:[_INITIAL_STATE,INITIAL_REDUCER]},{provide:_INITIAL_STATE,useValue:_initialState},{provide:_INITIAL_REDUCER,useValue:_reducer}]}var __extends=void 0||function(){var extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),Dispatcher=function(_super){function Dispatcher(){return _super.call(this,{type:Dispatcher.INIT})||this}return __extends(Dispatcher,_super),Dispatcher.prototype.dispatch=function(action){this.next(action)},Dispatcher.prototype.complete=function(){},Dispatcher.INIT="@ngrx/store/init",Dispatcher}(rxjs_BehaviorSubject.BehaviorSubject),__extends$1=void 0||function(){var extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),Reducer=function(_super){function Reducer(_dispatcher,initialReducer){var _this=_super.call(this,initialReducer)||this;return _this._dispatcher=_dispatcher,_this}return __extends$1(Reducer,_super),Reducer.prototype.replaceReducer=function(reducer){this.next(reducer)},Reducer.prototype.next=function(reducer){_super.prototype.next.call(this,reducer),this._dispatcher.dispatch({type:Reducer.REPLACE})},Reducer.REPLACE="@ngrx/store/replace-reducer",Reducer}(rxjs_BehaviorSubject.BehaviorSubject),__extends$2=void 0||function(){var extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),Store=function(_super){function Store(_dispatcher,_reducer,state$){var _this=_super.call(this)||this;return _this._dispatcher=_dispatcher,_this._reducer=_reducer,_this.select=_ngrx_core.select.bind(_this),_this.source=state$,_this}return __extends$2(Store,_super),Store.prototype.lift=function(operator){var store=new Store(this._dispatcher,this._reducer,this);return store.operator=operator,store},Store.prototype.replaceReducer=function(reducer){this._reducer.next(reducer)},Store.prototype.dispatch=function(action){this._dispatcher.next(action)},Store.prototype.next=function(action){this._dispatcher.next(action)},Store.prototype.error=function(err){this._dispatcher.error(err)},Store.prototype.complete=function(){},Store}(rxjs_Observable.Observable),__extends$3=void 0||function(){var extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),State=function(_super){function State(_initialState,action$,reducer$){var _this=_super.call(this,_initialState)||this,actionInQueue$=rxjs_operator_observeOn.observeOn.call(action$,rxjs_scheduler_queue.queue),actionAndReducer$=rxjs_operator_withLatestFrom.withLatestFrom.call(actionInQueue$,reducer$),state$=rxjs_operator_scan.scan.call(actionAndReducer$,function(state,_a){var action=_a[0],reducer=_a[1];return reducer(state,action)},_initialState);return state$.subscribe(function(value){return _this.next(value)}),_this}return __extends$3(State,_super),State}(rxjs_BehaviorSubject.BehaviorSubject),__decorate=void 0||function(decorators,target,key,desc){var d,c=arguments.length,r=3>c?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(3>c?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},INITIAL_REDUCER=new _angular_core.OpaqueToken("Token ngrx/store/reducer"),INITIAL_STATE=new _angular_core.OpaqueToken("Token ngrx/store/initial-state"),_INITIAL_REDUCER=new _angular_core.OpaqueToken("Token _ngrx/store/reducer"),_INITIAL_STATE=new _angular_core.OpaqueToken("Token _ngrx/store/initial-state"),StoreModule=function(){function StoreModule(){}return StoreModule_1=StoreModule,StoreModule.provideStore=function(_reducer,_initialState){return{ngModule:StoreModule_1,providers:provideStore(_reducer,_initialState)}},StoreModule=StoreModule_1=__decorate([_angular_core.NgModule({})],StoreModule);var StoreModule_1}();exports.Dispatcher=Dispatcher,exports.INITIAL_REDUCER=INITIAL_REDUCER,exports.INITIAL_STATE=INITIAL_STATE,exports._INITIAL_REDUCER=_INITIAL_REDUCER,exports._INITIAL_STATE=_INITIAL_STATE,exports._initialReducerFactory=_initialReducerFactory,exports._initialStateFactory=_initialStateFactory,exports._storeFactory=_storeFactory,exports._stateFactory=_stateFactory,exports._reducerFactory=_reducerFactory,exports.provideStore=provideStore,exports.StoreModule=StoreModule,exports.Reducer=Reducer,exports.State=State,exports.Store=Store,exports.combineReducers=combineReducers,Object.defineProperty(exports,"__esModule",{value:!0})});